# Domain Schema: Software Architecture
# Demonstrates knowledge management for software engineering teams.

name: software-architecture
version: "1.0"
description: >
  Track architectural decisions, components, APIs, dependencies,
  technical debt, and design patterns across a software system.

scopes:
  - global
  - system
  - service
  - team

entity_types:

  Component:
    fields:
      name:             { type: string, required: true }
      description:      { type: string }
      component_type:   { type: string, enum: [service, library, database, queue, gateway, ui, worker] }
      language:         { type: string }
      repository:       { type: string }
      owner_team:       { type: string }
      status:           { type: string, enum: [active, deprecated, planned, experimental] }
    staleness_days: 90

  ArchitecturalDecision:
    fields:
      name:             { type: string, required: true }
      description:      { type: string }
      context:          { type: string }
      decision:         { type: string }
      consequences:     { type: string }
      status:           { type: string, enum: [proposed, accepted, deprecated, superseded] }
      decision_date:    { type: datetime }
      deciders:         { type: string }
    staleness_days: 365

  APIEndpoint:
    fields:
      name:             { type: string, required: true }
      path:             { type: string }
      method:           { type: string, enum: [GET, POST, PUT, PATCH, DELETE] }
      description:      { type: string }
      version:          { type: string }
      auth_required:    { type: bool }
      rate_limit:       { type: string }
    staleness_days: 30

  Dependency:
    fields:
      name:             { type: string, required: true }
      version:          { type: string }
      dependency_type:  { type: string, enum: [runtime, build, dev, optional] }
      license:          { type: string }
      security_status:  { type: string, enum: [ok, vulnerable, outdated, eol] }
    staleness_days: 30

  TechnicalDebt:
    fields:
      name:             { type: string, required: true }
      description:      { type: string }
      severity:         { type: string, enum: [critical, high, medium, low] }
      estimated_effort: { type: string }
      impact:           { type: string }
      status:           { type: string, enum: [identified, planned, in_progress, resolved] }
    staleness_days: 60

  DesignPattern:
    fields:
      name:             { type: string, required: true }
      description:      { type: string }
      pattern_type:     { type: string, enum: [creational, structural, behavioral, architectural] }
      use_case:         { type: string }
    staleness_days: 365

  Incident:
    fields:
      name:             { type: string, required: true }
      description:      { type: string }
      severity:         { type: string, enum: [p0, p1, p2, p3, p4] }
      status:           { type: string, enum: [active, mitigated, resolved, postmortem_done] }
      root_cause:       { type: string }
      started_at:       { type: datetime }
      resolved_at:      { type: datetime }
    staleness_days: 90

  QualityMetric:
    fields:
      name:             { type: string, required: true }
      metric_type:      { type: string, enum: [coverage, performance, reliability, security, maintainability] }
      value:            { type: float }
      target:           { type: float }
      measured_at:      { type: datetime }
    staleness_days: 7

relation_types:
  depends_on:
    from: Component
    to: Component
  uses_dependency:
    from: Component
    to: Dependency
  exposes:
    from: Component
    to: APIEndpoint
  decided_by:
    from: Component
    to: ArchitecturalDecision
  has_debt:
    from: Component
    to: TechnicalDebt
  applies_pattern:
    from: Component
    to: DesignPattern
  affected:
    from: Incident
    to: Component
  measures:
    from: QualityMetric
    to: Component
